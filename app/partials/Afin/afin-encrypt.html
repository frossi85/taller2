<h1>Cifrado de Afin - Método de Cifrado</h1>

<div ng-controller="AfinEncryptCtrl as encCtrl">

	<!-- Significado variables -->
	<h3>Diccionario de Variables</h3>
	<ul>
		<li><em>Ci</em>: Caracter de mensaje cifrado</li>
		<li><em>A</em>: Constante de decimación</li>
		<li><em>B</em>: Clave</li>
		<li><em>Mi</em>: Carácter del mensaje original</li>
		<li><em>N</em>: Longitud del alfabeto</li>
	</ul>

	<!-- Pseudocodigo de cifrado -->
	<div ng-show="!encCtrl._withAutoEvaluation" class="container-fluid">
		<h3>Algoritmo de Cifrado</h3>
		<ul>
			<p>El algoritmo de cifrado se basa en la siguiente formula:</p>
			<p><b>Ci = (A * Mi + B) MOD N</b></p>
		</ul>
		<ol>
			<li ng-class="{ step: encCtrl.isCurrentStep(1) }">Tomar el primer carácter del mensaje de entrada o el siguiente al último procesado y pasarlo al número de su posición en el alfabeto de longitud 26</li>
			<li ng-class="{ step: encCtrl.isCurrentStep(2) }">Aplicar la formula de cifrado al número de posición obtenido en el paso anterior</li>
			<li ng-class="{ step: encCtrl.isCurrentStep(3) }">Tomar el resultado del paso anterior y obtener el carácter correspondiente a esa posición en el alfabeto de longitud 26. Carácter cifrado</li>
		</ol>
		<style>
		.step {
			background-color:yellow;
			font-weight:bold;
		}
		</style>
	</div>

	<!-- Formulario texto-clave -->
	<form name="afinForm" novalidate ng-submit="afinForm.$valid && encCtrl.init()">
		<div class="form-group">
			<label>Modo Autoevaluación</label>
			<div class="input-group">
				<div id="radioBtn" class="btn-group">
					<a class="btn btn-primary btn-sm" ng-disabled="encCtrl.start" ng-class="{ 'active' : encCtrl._withAutoEvaluation, 'notActive' : !encCtrl._withAutoEvaluation }" ng-click="encCtrl.auto(true)" ng-confirm-click="Al cambiar el modo, será necesario inresar los valores nuevamente. ¿Desea continuar?">Si</a>
					<a class="btn btn-primary btn-sm" ng-disabled="encCtrl.start" ng-class="{ 'active' : !encCtrl._withAutoEvaluation, 'notActive' : encCtrl._withAutoEvaluation }" ng-click="encCtrl.auto(false)" ng-confirm-click="Al cambiar el modo, será necesario inresar los valores nuevamente. ¿Desea continuar?">No</a>
				</div>
			</div>
		</div>

		<div class="form-group" ng-class="{'has-error': afinForm.keyB.$invalid}">
			<label class="control-label" for="keyB">Clave</label>
			<input name="keyB" type="text" class="form-control" ng-model="keyB" id="keyB" placeholder="Ingresar clave" ng-pattern="/^([1-9]|[1][0-9]|[2][0-6])$/" ng-minlength="1" ng-maxlength="2" required ng-disabled="encCtrl.start">
			<p class="help-block">
				<strong ng-show="afinForm.keyB.$error.required">El campo debe estar completado.<br/></strong>
				<strong ng-show="((afinForm.keyB >26 || (afinForm.keyB < 1))).$error.pattern">La clave debe cumplir con que se encuentre entre 1 y 26/></strong>
				<strong ng-show="afinForm.keyB.$error.pattern">El texto ingresado contiene caracteres inválidos.<br/></strong>
				Escriba un número entero que cumpla con que se encuentre entre 1 y 26. Debe ser un número coprimo con la Constante. 
			</p>
		</div>

		<div class="form-group" ng-class="{'has-error': afinForm.keyA.$invalid}">
			<label class="control-label" for="keyA">Constante de Cifrado</label>
			<input name="keyA" type="text" class="form-control" ng-model="keyA" id="keyA" placeholder="Ingresar Constante" ng-pattern="/^([1-9]|[1][0-9]|[2][0-6])$/" ng-minlength="1" ng-maxlength="2" required ng-disabled="encCtrl.start">
			<p class="help-block">
				<strong ng-show="afinForm.keyA.$error.required">El campo debe estar completado.<br/></strong>
				<strong ng-show="(afinForm.keyA.$error.minlength || afinForm.keyA.$error.maxlength)">La constante debe cumplir con que sea menor que 26 y distinta de 0.<br/></strong>
				<strong ng-show="afinForm.keyA.$error.pattern">El texto ingresado contiene caracteres inválidos.<br/></strong>
				Escriba un número entero que cumpla con que sea distinto de 1 y menor de 27. Debe ser un número coprimo con la Clave. 
			</p>
		</div>

		<div class="form-group" ng-class="{'has-error': afinForm.plaintext.$invalid}">
			<label class="control-label" for="plaintext">Texto a cifrar</label>
			<textarea name="plaintext" class="form-control" id="plaintext" rows="3" ng-model="plaintext" placeholder="Ingresar Texto a cifrar" ng-pattern="/^([a-z]*)|([ ]*)$/" required ng-disabled="encCtrl.start"></textarea>
			<p class="help-block">
				<strong ng-show="afinForm.plaintext.$error.required">El campo debe estar completado.<br/></strong>
				<strong ng-show="afinForm.plaintext.$error.pattern">El texto ingresado contiene caracteres inválidos.<br/></strong>
				Escriba un texto que contenga caracteres del alfabeto inglés. Es decir de la 'a' a la 'z', sin saltos de linea o caracteres especiales
			</p>
		</div>

		<input class="btn btn-default" ng-disabled="!afinForm.$valid" ng-show="!encCtrl.start" type="submit" value="Empezar"/>
		<input class="btn btn-default" ng-show="encCtrl.start" type="button" ng-click="encCtrl.next()" value="Siguiente"/>
		<input class="btn btn-default" ng-show="encCtrl.start" type="button" ng-click="encCtrl.finish()" value="Terminar"/>

		<div>&nbsp;</div>
		
		
		<div class="form-group">
			<label class="control-label">Parcial</label>
			<textarea ng-disabled="!encCtrl._withAutoEvaluation" name="parcial" class="form-control" id="parcial" rows="3" ng-model="parcial" ng-pattern="/^[a-z]*|[0-9]*$/"></textarea>
		</div>

		<div class="form-group">
			<label class="control-label">Resultado</label>
			<textarea ng-disabled=true name="result" class="form-control" id="result" rows="3" ng-model="result" ></textarea>
		</div>

	</form>

</div>

